-- Auto-generated sprite data
-- Source: captain_64.png

-- Draw sprite at position (x, y)
-- Set skip_zero=true to treat palette index 0 as transparent
local function drawSprite(sprite, palette, x, y, skip_zero)
    for row_idx, row in ipairs(sprite) do
        for col_idx, color_idx in ipairs(row) do
            if not skip_zero or color_idx ~= 0 then
                local color = palette[color_idx + 1]  -- Lua is 1-indexed
                if color then
                    local px = x + col_idx - 1
                    local py = y + row_idx - 1
                    if px >= 0 and px < WIDTH and py >= 0 and py < HEIGHT then
                        setPixel(px, py, color[1], color[2], color[3])
                    end
                end
            end
        end
    end
end

-- Draw sprite scaled by factor
local function drawSpriteScaled(sprite, palette, x, y, scale, skip_zero)
    for row_idx, row in ipairs(sprite) do
        for col_idx, color_idx in ipairs(row) do
            if not skip_zero or color_idx ~= 0 then
                local color = palette[color_idx + 1]
                if color then
                    for sy = 0, scale - 1 do
                        for sx = 0, scale - 1 do
                            local px = x + (col_idx - 1) * scale + sx
                            local py = y + (row_idx - 1) * scale + sy
                            if px >= 0 and px < WIDTH and py >= 0 and py < HEIGHT then
                                setPixel(px, py, color[1], color[2], color[3])
                            end
                        end
                    end
                end
            end
        end
    end
end


local captain_64_palette = {
    {  0,   0,   0}, -- transparent
    {243, 244, 245},
    {242, 243, 244},
    {243, 244, 244},
    {104,  99,  47},
    {105,  99,  47},
    {105, 100,  48},
    {243, 243, 244},
    {243, 244, 246},
    {255, 228, 184},
    {242, 244, 245},
    {242, 244, 244},
    { 55,  38,  20},
    {241, 242, 243},
    {255, 227, 183},
    {223, 160,  90},
    {241, 242, 244},
    {242, 243, 245},
    { 56,  38,  20},
    {255, 228, 183},
    { 56,  39,  21},
    {224, 161,  91},
    {240, 196, 143},
    {105, 100,  47},
    {242, 242, 244},
    {223, 161,  90},
    { 57,  39,  21},
    {236, 236, 236},
    {240, 196, 144},
    {105,  99,  48},
    {142, 142, 142},
    {222, 160,  89},
    {242, 243, 243},
    {242, 242, 243},
    {120, 115,  69},
    {104,  98,  47},
    {253, 222, 185},
    {253, 222, 186},
    {255, 229, 184},
    {241, 197, 144},
    {224, 161,  90},
    {103,  98,  46},
    {133, 129,  89},
    {133, 130,  89},
    {143, 142, 142},
    {143, 143, 143},
    {143, 143, 142},
    { 56,  38,  21},
    {121,  85,  45},
    {222, 160,  90},
    {241, 196, 145},
    {237, 236, 236},
    {133, 129,  88},
    {237, 237, 237},
    {253, 221, 185},
    {122,  86,  46},
    { 47,  41,  34},
    {255, 227, 182},
    {122,  86,  45},
    {123,  86,  46},
    {122,  85,  45},
    {241, 197, 145},
    {103,  91,  81},
    {236, 237, 236},
    {104,  91,  81},
    {240, 197, 145},
    {241, 196, 144},
    {255, 227, 184},
    {224, 224, 219},
    {120, 116,  70},
    {145, 142, 106},
    { 81,  82,  81},
    { 81,  82,  82},
    {199, 200, 169},
    {228, 189, 144},
    {252, 222, 186},
    {228, 190, 145},
    {227, 189, 144},
    {251, 221, 184},
    {223, 160,  89},
}

local captain_64_width = 22
local captain_64_height = 64

local captain_64 = {
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0,18,12,20,18,12,20,18,56, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0,47,20,12,12,12,18,20,18,18,12, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0,12,12,18,20,18,26,20,12,18,26,20,20, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0,12,12,20,12,14,14, 9, 9, 9, 9,14,20,18,18, 0, 0, 0, 0},
    { 0, 0, 0, 0,12,20,26, 9,14, 9,19,14,57,14,38,12,12,26, 0, 0, 0, 0},
    { 0, 0, 0, 0,12,26,14,14,14, 9, 9, 9,19, 9, 9, 9,18,18, 0, 0, 0, 0},
    { 0, 0, 0, 0,12,12, 9,19,48,48,15,21,58,59,60,14,18,12, 0, 0, 0, 0},
    { 0, 0, 0, 0,15,12, 9, 9,39,15,21,25,21,61,22, 9,47,15, 0, 0, 0, 0},
    { 0, 0, 0, 0,15, 9, 9,49,62,63,15,21,27,64,21,19,38,65, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0,25,22,19, 9,19,66,39, 9, 9,19,50,31, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0,15,28,19, 9,14, 9, 9,19,19,51,39,15, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0,15,22, 9,27,14, 9, 9,19,19, 9,28,25, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0,15,22, 9,28,15,15,28,67,19,40, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0,31, 9, 9,27,51,38,14,19, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0,22, 9,14,14, 9,22,31, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 6, 5, 5,40,22,22,50,28,25,22, 5,23, 4, 0, 0, 0, 0},
    { 0, 0, 6, 5, 7, 1, 1,10, 4, 6, 5, 5, 6, 5, 8,16, 1, 2, 2, 4, 0, 0},
    { 0, 4, 3, 1, 1, 1, 1, 2,13, 1, 7, 2, 1, 2, 2, 3, 1, 1, 3, 2, 5, 0},
    { 0, 6, 3, 2,17, 1, 1, 2, 1, 2, 8, 1,32,17,11,13, 8, 1,32, 2,23, 0},
    { 4, 2, 1, 2, 1, 1,13,10, 1, 8, 1, 3, 3,13, 2,17, 3, 2, 1, 1, 1, 4},
    { 4, 8, 2, 2,68, 2,24, 1, 1,33, 1, 3, 3, 3, 2, 2, 2, 1, 8, 1, 3, 6},
    { 4, 7, 3, 1,34,13, 2, 2, 1, 7, 3, 3, 7, 1, 1, 2,11, 4, 3,11, 1, 4},
    { 4,24, 2, 3,34, 1, 3, 7, 2, 1, 2, 1, 3, 2, 1, 7, 3, 4, 3, 2, 1, 6},
    { 4, 3, 2,13,69, 1,10, 1, 2, 2, 3, 3, 7, 8, 8, 2,17, 4, 1, 1, 3, 6},
    { 4, 1, 1, 2,34, 1,10, 1, 2,16, 3, 7, 1, 3, 2, 1, 1, 4, 7, 7, 7,41},
    { 4, 2, 2, 7,34, 3, 2, 3, 2, 1, 1,24, 3, 1,11, 1, 8, 4, 2,32, 1,35},
    { 4, 1, 1, 3, 4, 1,11, 2, 1, 1, 2, 7, 2, 1, 2,17, 3,42, 2, 1, 2, 5},
    { 4, 1, 1, 2, 4, 3, 1, 3, 2,13, 1,24, 3, 3, 2, 3, 3,52, 1, 1,16, 4},
    { 4, 1, 1,16, 4, 2, 7,17, 7,10,17, 7, 3, 8, 2, 1, 2,52,11, 1,11, 6},
    { 4, 1, 1, 3, 6, 2, 1,17, 1, 3, 1, 1, 3, 1, 3, 2, 2,43,16, 1,10, 5},
    { 4, 1, 2, 1, 4, 2,24, 7, 8, 1, 3, 1, 1,13, 2, 8, 2,42, 2,17, 1, 4},
    { 4, 2, 1, 1, 6, 1, 8,16, 1, 1, 1,13, 2,11, 1, 1, 3,43, 1, 7, 8, 4},
    { 4,13, 2, 8, 6, 7,10, 2, 1,11,16,11, 3,16, 2, 3, 1,42, 3,17, 3, 5},
    { 4, 1,13, 7, 6, 1,24, 7, 8,11, 2, 2, 3, 7, 2, 2, 2,43, 1, 2, 1, 4},
    { 4, 1, 3, 2, 4, 1, 8, 2, 3,10,10,16, 1,10,11, 3,13,70, 7, 8, 2, 6},
    { 4,27,27,71, 5,11, 3,33, 2,16, 3, 1, 3, 1, 2, 2, 1, 1,72,53,53,73},
    { 4,31,36,54, 6, 6, 6,29, 5, 5, 5, 6, 4, 4, 4, 6, 5, 6,37,36,21,15},
    { 0,74,37,75,21, 1,11, 7,33,10, 7, 3, 1, 2, 2, 1, 7, 1,36,54,76,15},
    { 0,36,37,55,77,17, 3, 8, 1, 2,13, 1, 3, 3, 2, 3, 8, 5,55,78,37,21},
    { 0,49,79,25,15,10, 1, 1, 2, 3,10, 2,10, 1, 2, 2, 3, 4,25,40,21, 0},
    { 0, 0, 0, 0, 0, 4, 7, 1,13, 2, 2, 8, 2, 1,13, 3, 3, 5, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 3, 7, 2, 1, 2,16, 2, 8,17, 8,13, 5, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 2, 1,10, 1,13,33, 7, 8, 2, 1, 7,23, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 1, 1,16,11, 8, 8, 2, 2, 3, 1, 5, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 2, 2, 2, 1, 1, 1, 3, 2, 2, 7, 4, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 2, 3,10, 8,35,35, 7, 3, 3, 2, 6, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4,10, 2, 1,17, 4, 4,24, 1, 3, 1, 6, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 2, 3, 8, 8, 4, 4, 3,11, 8, 7,29, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 6, 1, 1, 8, 3, 5, 6, 2, 1, 1, 1,23, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4,11, 3, 3, 2, 6, 5, 1,10, 3, 1,23, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 7, 8,17, 8, 4,23, 7, 3, 3, 1,29, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 6, 1,10, 2, 8, 4, 4, 7, 1, 1, 2, 6, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 5, 2, 2, 1, 2, 5, 4, 2, 7,16, 1, 5, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 5, 1, 2, 3, 7, 5, 6, 2,10, 1, 2, 5, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 3,11,10, 8, 5, 5,13,16, 1,11,23, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0,29, 2, 3, 3, 3, 5, 6, 3,10, 3, 2, 6, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4,11, 1, 2, 3, 4, 4, 3,32,11, 3,29, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 6, 1, 2, 8, 1, 6, 5, 2, 7,16, 2, 5, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 4, 2, 1, 3, 1, 5, 6,17, 1, 1, 1, 5, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 5, 6, 5, 4, 4, 6, 6, 6,41,41, 5, 5, 5, 6, 0, 0, 0, 0},
    { 0, 0, 0, 5, 5, 5, 4, 5, 6, 4, 6, 6, 6, 4, 6, 5, 5, 4, 5, 0, 0, 0},
    { 0, 0, 4, 6,23, 5, 4, 5,44, 0, 0, 0, 0,45,45, 5,35, 4, 4, 5, 0, 0},
    { 0, 0,45,30,46,46,30,30, 0, 0, 0, 0, 0, 0, 0,30,46,30,44,44, 0, 0},
}



return {
    palette = captain_64_palette,
    sprite = captain_64,
    drawSprite = drawSprite,
    drawSpriteScaled = drawSpriteScaled
}
